generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model ProductTemplate {
  ean         Int               @id @default(autoincrement())
  name        String
  description String?
  type        product_type      @default(GENERICO)
  lote_type   product_lote_type @default(UNIDADE)
  product     product[]

  @@map("product_template")
}

model product {
  id               Int               @id @default(autoincrement())
  template_id      Int
  name             String
  description      String?
  type             product_type      @default(GENERICO)
  lote_type        product_lote_type @default(UNIDADE)
  weight           Decimal?          @db.Decimal(5, 2)
  lote_amount      Int?
  quantity         Int?
  validity         String?
  column           Int?
  row              Int?
  created_date     DateTime          @default(now())
  updated_date     DateTime          @updatedAt
  user_id          Int
  shelf            Int?
  product_template ProductTemplate   @relation(fields: [template_id], references: [ean], map: "Product_template_id_fkey")
  user             user              @relation(fields: [user_id], references: [id])

  @@index([template_id], map: "Product_template_id_fkey")
  @@index([user_id], map: "product_user_id_fkey")
}

model user {
  id       Int       @id @default(autoincrement())
  email    String    @unique(map: "User_email_key")
  password String
  name     String?
  products product[]
}

enum product_type {
  GENERICO
  LIMPEZA
  CONSERVA
  PERESIVEL
  BEBIDAS
}

enum product_lote_type {
  UNIDADE
  CAIXA
  ENGRADADO
  PACOTE
  FARDO
}
